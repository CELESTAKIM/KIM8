<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kimathi Joram - Geospatial Engineer</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        /* General Styles */
        :root {
            --background-light: #f4f7f6;
            --text-light: #333;
            --card-background-light: #ffffff;
            --border-light: #e0e0e0;
            --gradient-start-light: #007bff;
            --gradient-end-light: #0056b3;
            --button-hover-light: #004085;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --whatsapp-green: #25d366;
            --whatsapp-dark-green: #1da851;
            --whatsapp-bg: #e5ddd5;
            --whatsapp-message-bg-self: #dcf8c6;
            --whatsapp-message-bg-other: #fff;
            --footer-basemap-bg: #f2f2f2; /* Light grey for basemap */
            --footer-basemap-border: #ccc;
        }

        [data-theme='dark'] {
            --background-light: #2c3e50;
            --text-light: #ecf0f1;
            --card-background-light: #34495e;
            --border-light: #4a647a;
            --gradient-start-light: #6a89cc;
            --gradient-end-light: #4a69bd;
            --button-hover-light: #3b5080;
            --shadow-light: rgba(0, 0, 0, 0.3);
            --whatsapp-green: #128C7E;
            --whatsapp-dark-green: #075e54;
            --whatsapp-bg: #1c2b3a; /* Darker bg for chat */
            --whatsapp-message-bg-self: #075e54; /* Darker green */
            --whatsapp-message-bg-other: #34495e; /* Darker grey */
            --footer-basemap-bg: #34495e; /* Darker grey for basemap */
            --footer-basemap-border: #4a647a;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-light);
            color: var(--text-light);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        h1, h2, h3 {
            color: var(--gradient-start-light);
            margin-bottom: 10px;
        }

        a {
            color: var(--gradient-start-light);
            text-decoration: none;
            transition: color 0.3s;
        }

        a:hover {
            color: var(--button-hover-light);
        }

        /* Header and Navigation */
        header {
            background: var(--card-background-light);
            padding: 15px 20px;
            box-shadow: 0 2px 5px var(--shadow-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .menu-icon {
            display: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-light);
        }

        nav a {
            margin: 0 15px;
            font-weight: bold;
            padding: 5px 0;
            position: relative;
        }

        nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--gradient-start-light);
            transition: width 0.3s ease-out;
        }

        nav a:hover::after,
        nav a.active::after {
            width: 100%;
        }

        #toggle-theme {
            background: var(--gradient-start-light);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px var(--shadow-light);
            transition: background 0.3s ease;
        }

        #toggle-theme:hover {
            background: var(--button-hover-light);
        }

        /* Section Frames on Scroll */
        .scrolled-in {
            box-shadow: 0 0 0 4px var(--gradient-start-light), 0 4px 10px var(--shadow-light); /* Highlight border */
            transition: box-shadow 0.5s ease-out;
        }

        /* Portfolio Section */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .left-section, .right-section {
            background: var(--card-background-light);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 10px var(--shadow-light);
            transition: transform 0.3s ease-in-out;
        }

        .left-section:hover, .right-section:hover {
            transform: translateY(-5px);
        }

        .left-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            position: relative; /* Needed for z-index layering */
        }

        .right-section {
            flex: 2;
            min-width: 400px;
        }

        /* GIS Conglomerate Behind Profile Image */
        .gis-background-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-radius: 12px;
            z-index: 1; /* Behind profile image */
            padding: 20px; /* To prevent content from being cut by rounded corners */
            box-sizing: border-box;
            opacity: 0.8; /* Slight transparency */
            transition: opacity 0.3s ease;
        }

        .gis-background-container:hover {
            opacity: 1;
        }

        .gis-background-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 12px;
        }

        .gis-details-overlay {
            position: relative; /* Above the image */
            z-index: 2;
            background: rgba(0, 0, 0, 0.6); /* Darker overlay for text readability */
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
            transition: background 0.3s ease;
        }

        .gis-details-overlay p {
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        .gis-details-overlay a {
            color: #8aff8a; /* Light green for links */
            font-weight: bold;
        }

        .countdown {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffe600; /* Yellow for countdown */
            margin-top: 10px;
        }

        .profile-img-wrapper {
            position: relative;
            z-index: 2; /* On top of GIS background */
            margin-top: 50px; /* Adjust as needed to position correctly */
        }

        .profile-img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--gradient-start-light);
            cursor: pointer;
            transition: transform 0.3s ease, border-color 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4); /* Stronger shadow to stand out */
        }

        .profile-img:hover {
            transform: scale(1.05);
            border-color: var(--button-hover-light);
        }

        .quick-facts {
            position: relative; /* Above GIS background */
            z-index: 2;
            text-align: center;
            padding: 15px;
            background: var(--card-background-light); /* Maintain card background */
            border-radius: 8px;
            border: 1px solid var(--border-light);
            width: 100%;
            max-width: 280px; /* Limit width */
            box-shadow: 0 2px 5px var(--shadow-light);
        }

        .quick-facts h3 {
            color: var(--text-light);
            margin-top: 0;
            margin-bottom: 10px;
        }

        .tagline {
            font-style: italic;
            color: #777;
            margin-bottom: 15px;
        }

        .degree-card {
            background: linear-gradient(145deg, var(--gradient-start-light), var(--gradient-end-light));
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
            box-shadow: 0 4px 8px var(--shadow-light);
        }

        .bio, .skills, .projects {
            margin-bottom: 20px;
        }

        .skills ul, .projects ul {
            list-style: none;
            padding: 0;
        }

        .skills li, .projects li {
            background: var(--background-light);
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 4px solid var(--gradient-start-light);
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px var(--shadow-light);
        }

        .skills li strong {
            margin-right: 8px;
            color: var(--gradient-end-light);
        }

        /* Contact Section */
        .contact {
            background: var(--card-background-light);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 10px var(--shadow-light);
            margin-top: 20px;
        }

        .contact h2 {
            text-align: center;
            margin-bottom: 30px;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .contact-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-light);
        }

        .contact-form input[type="text"],
        .contact-form input[type="email"],
        .contact-form select,
        .contact-form textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid var(--border-light);
            border-radius: 6px;
            box-sizing: border-box;
            background-color: var(--background-light);
            color: var(--text-light);
        }

        .contact-form input[type="text"]:focus,
        .contact-form input[type="email"]:focus,
        .contact-form select:focus,
        .contact-form textarea:focus {
            border-color: var(--gradient-start-light);
            outline: none;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.2);
        }

        .contact-form button {
            background: linear-gradient(145deg, var(--gradient-start-light), var(--gradient-end-light));
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .contact-form button:hover {
            background: var(--button-hover-light);
            transform: translateY(-2px);
        }

        .contact-form button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .whatsapp-btn {
            display: inline-block;
            background: var(--whatsapp-green);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            margin-top: 10px;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .whatsapp-btn:hover {
            background: var(--whatsapp-dark-green);
            transform: translateY(-2px);
        }

        .status {
            margin-top: 15px;
            text-align: center;
            font-weight: bold;
            color: var(--gradient-start-light);
        }

        /* Popups */
        .profile-popup, .starvision-popup, .project-popup, .whatsapp-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-background-light);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px var(--shadow-light);
            z-index: 2000;
            text-align: center;
            max-width: 450px;
            width: 90%;
            box-sizing: border-box;
        }

        .profile-popup img, .project-popup img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #ff4d4d;
        }

        /* WhatsApp Chat Popup Styling */
        .whatsapp-popup {
            padding: 0; /* Remove default padding for chat UI */
            max-width: 380px; /* Typical phone width */
            background-color: var(--whatsapp-bg); /* WhatsApp chat background */
            overflow: hidden;
        }

        .whatsapp-header {
            background-color: var(--whatsapp-green);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.1em;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .whatsapp-header .close-btn {
            position: static; /* Reset position for header */
            margin-left: 10px;
            color: white;
            font-size: 28px;
        }

        .whatsapp-chat-body {
            padding: 20px;
            overflow-y: auto;
            max-height: 300px; /* Fixed height for chat scroll */
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-image: url('whatsapp-bg.png'); /* Optional: Add a subtle background pattern */
            background-size: cover;
            color: var(--text-light); /* Ensure text is readable */
        }

        .whatsapp-message {
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 8px;
            position: relative;
            font-size: 0.9em;
            word-wrap: break-word;
        }

        .whatsapp-message.self {
            align-self: flex-end;
            background-color: var(--whatsapp-message-bg-self);
            color: var(--text-light);
        }

        .whatsapp-message.other {
            align-self: flex-start;
            background-color: var(--whatsapp-message-bg-other);
            color: var(--text-light);
        }
        [data-theme='dark'] .whatsapp-message.self {
            color: white; /* For dark theme, text on dark green */
        }

        .whatsapp-input-area {
            display: flex;
            padding: 15px 20px;
            gap: 10px;
            border-top: 1px solid var(--border-light);
            background-color: var(--card-background-light); /* Input background */
        }

        .whatsapp-input-area textarea {
            flex-grow: 1;
            padding: 10px;
            border-radius: 20px;
            border: 1px solid var(--border-light);
            resize: none;
            font-size: 0.9em;
            background-color: var(--background-light);
            color: var(--text-light);
        }

        .whatsapp-send-btn {
            background-color: var(--whatsapp-green);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .whatsapp-send-btn:hover {
            background-color: var(--whatsapp-dark-green);
        }

        /* Footer as Basemap */
        footer {
            background-color: var(--footer-basemap-bg);
            border-top: 5px solid var(--footer-basemap-border);
            padding: 30px 20px;
            text-align: center;
            position: relative;
            overflow: hidden; /* Hide anything outside */
            box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.1);
            min-height: 200px; /* Ensure enough space for basemap feel */
        }

        .footer-content {
            position: relative;
            z-index: 10; /* Above basemap elements */
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .basemap-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                linear-gradient(90deg, var(--footer-basemap-border) 1px, transparent 1px) 0% 0% / 50px 50px,
                linear-gradient(var(--footer-basemap-border) 1px, transparent 1px) 0% 0% / 50px 50px;
            opacity: 0.3; /* Subtle grid */
            z-index: 1;
        }

        .project-map-points {
            display: flex;
            justify-content: center;
            gap: 50px; /* Space between map points */
            margin-bottom: 20px;
            position: relative;
            z-index: 5;
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }

        .map-point {
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: transform 0.3s ease;
        }

        .map-point:hover {
            transform: scale(1.1);
        }

        .map-point-icon {
            width: 40px;
            height: 40px;
            background-color: var(--gradient-start-light);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 5px var(--shadow-light);
            border: 2px solid white; /* Inner border */
        }

        .map-point-label {
            background-color: var(--card-background-light);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            white-space: nowrap;
            box-shadow: 0 1px 3px var(--shadow-light);
            color: var(--text-light);
        }

        .social-links {
            position: relative;
            z-index: 10;
        }

        .social-links a {
            margin: 0 10px;
            font-weight: 500;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }

            header {
                padding: 10px;
            }

            .menu-icon {
                display: block;
            }

            nav {
                display: none;
                flex-direction: column;
                width: 100%;
                position: absolute;
                top: 60px;
                left: 0;
                background: var(--card-background-light);
                box-shadow: 0 5px 5px var(--shadow-light);
            }

            nav.active {
                display: flex;
            }

            nav a {
                margin: 10px 20px;
                padding: 10px 0;
                border-bottom: 1px solid var(--border-light);
            }

            nav a:last-child {
                border-bottom: none;
            }

            .main-content {
                flex-direction: column;
            }

            .left-section, .right-section {
                min-width: unset;
                width: 100%;
            }

            /* Adjust left section for layering on mobile */
            .left-section {
                padding-top: 100px; /* Make space for profile image */
            }

            .profile-img-wrapper {
                position: absolute;
                top: 20px; /* Position at the top of the left section */
                left: 50%;
                transform: translateX(-50%);
                margin-top: 0;
            }

            .gis-background-container {
                position: relative; /* Take up normal flow */
                height: 250px; /* Fixed height for mobile */
                margin-top: -80px; /* Pull up to overlay profile */
            }

            .quick-facts {
                margin-top: 20px; /* Give space after image */
                max-width: unset;
            }

            .contact-form button {
                width: 100%;
                margin-right: 0;
                margin-bottom: 10px;
            }

            .whatsapp-btn {
                width: 100%;
                box-sizing: border-box;
            }
        }
    </style>
</head>
<body>
    <button id="toggle-theme">🌙</button>

    <header>
        <div class="menu-icon">☰</div>
        <nav>
            <a href="#home">Home</a>
            <a href="#skills">Skills</a>
            <a href="#projects">Projects</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>

    <div class="container">
        <div class="main-content" id="home">
            <div class="left-section">
                <div class="gis-background-container">
                    <img src="WhatsApp Image 2025-06-28 at 09.42.33_34c77718.jpg" alt="GIS Conglomerate" class="gis-background-img">
                    <div class="gis-details-overlay">
                        <p><strong>GIS Conglomerate:</strong> Founded to empower geospatial innovation in Kenya, delivering sustainable solutions through GIS and Remote Sensing.</p>
                        <p>Aim: To drive environmental conservation and urban planning with cutting-edge technology.</p>
                        <div class="countdown" id="countdown">Calculating...</div>
                        <a href="https://www.linkedin.com/in/dunia-data-14840a372/" target="_blank">Visit LinkedIn</a>
                    </div>
                </div>

                <div class="profile-img-wrapper">
                    <img src="WhatsApp%20Image%202025-06-28%20at%2021.41.52_73c097e8.jpg" alt="Kimathi Joram (Celesta Kim)" class="profile-img" id="profile-img">
                </div>

                <div class="quick-facts">
                    <h3>Quick Facts</h3>
                    <p>Geospatial Engineer</p>
                    <p>Remote Sensing & GIS Specialist</p>
                </div>
            </div>

            <div class="right-section">
                <h1>Kimathi Joram (Celesta Kim)</h1>
                <h2>Lead Geospatial Engineer</h2>
                <p class="tagline">Founder – GIS Conglomerate</p>
                <div class="degree-card">
                    BSc Geospatial Information Science and Remote Sensing, Dedan Kimathi University of Technology
                </div>

                <div class="bio">
                    <h3>About Kimathi</h3>
                    <p>Kimathi Joram, known as Celesta Kim, is a visionary Geospatial Engineer and the founder of GIS Conglomerate. Specializing in GIS and Remote Sensing, Kimathi leverages advanced tools and AI to deliver innovative solutions for sustainable development. His expertise spans land use analysis, vegetation monitoring, and site suitability modeling, driving impactful projects in environmental conservation and urban planning.</p>
                    <p>As a leader in the Geospatial Developers Club (GDEV) and an active OpenStreetMap (OSM) contributor, Kimathi mentors aspiring geospatial professionals and shares knowledge through his YouTube channel, offering tutorials on USGS data, Google Earth Engine, and map-making.</p>
                </div>

                <div class="skills" id="skills">
                    <h3>GIS & Remote Sensing Skills</h3>
                    <ul>
                        <li><strong>Analysis:</strong> Land Use Land Cover (LULC) analysis (Raster & Vector), NDVI analysis, accuracy assessment, site suitability modeling</li>
                        <li><strong>Tools:</strong> ArcGIS Pro, ArcMap, QGIS, ERDAS Imagine, ENVI, Google Earth Engine, GeoServer, PostGIS, PostgreSQL, AutoCAD, Agisoft Metashape, DJI SmartFarm, ArcGIS Online, QField</li>
                        <li><strong>Surveying:</strong> RTK GPS (Beacon establishment, searching, setup, line stakeout), Total Station, Dumpy Level</li>
                        <li><strong>Data Collection:</strong> KoboToolbox, Google Forms, Google Sheets</li>
                        <li><strong>Programming:</strong> Python (Advanced, used in GEE), JavaScript (Advanced, for geospatial applications)</li>
                    </ul>
                    <div class="skills" id="skills">
                        <h3>Skills</h3>
                        <ul>
                            <li><strong>GIS Software:</strong> ArcGIS Pro, ArcMap, QGIS, QField, ERDAS Imagine, ENVI, Google Earth Engine, ArcGIS Online, GeoServer, PostGIS, PostgreSQL, AutoCAD, Agisoft Metashape, DJI SmartFarm</li>
                            <li><strong>Web Development:</strong> HTML, CSS, JavaScript, responsive design, GitHub Pages, interactive web maps</li>
                            <li><strong>Programming:</strong> Python (Colab, GeoPandas, Rasterio, Folium), JavaScript (Google Earth Engine), SQL (PostGIS/PostgreSQL)</li>
                            <li><strong>Remote Sensing:</strong> NDVI analysis, LULC classification, image preprocessing, change detection, Landsat & Sentinel data handling</li>
                            <li><strong>Spatial Analysis:</strong> Buffering, overlay, suitability modeling, terrain and hydrology analysis, land cover change</li>
                            <li><strong>Field Data Collection:</strong> GPS surveying, QField, KoboToolbox, drone-based mapping, GCP collection</li>
                            <li><strong>Cartography & Visualization:</strong> Poster design, map layouts, labeling, symbology, 3D terrain modeling</li>
                            <li><strong>Database & Automation:</strong> Spatial database management (PostgreSQL/PostGIS), Python scripting, GIS model building</li>
                            <li><strong>Media & Communication:</strong> Video editing (tutorials, project demos), GIS YouTube content creation, technical presentation skills</li>
                        </ul>
                    </div>
                    
                </div>

                <div class="projects" id="projects">
                    <h3>Key Projects</h3>
                    <ul>
                        <li><strong>LULC Analysis (2024):</strong> Raster & Vector LULC with accuracy assessment for KSA (80% complete)</li>
                        <li><strong>NDVI Analysis:</strong> Free tool for tea land changes in Kericho (<a href="https://colab.research.google.com/drive/1fBv7YBIlREaqOOeWszRHFU_Zn8f_t514?usp=sharing" target="_blank">GitHub</a>)</li>
                        <li><strong>NDVI Analysis:</strong> Miraa land changes in Igembe (<a href="https://colab.research.google.com/drive/1cg1P0MBqiW6wqiviNMWNz9OpFUIsMSIn?usp=sharing" target="_blank">GitHub</a>)</li>
                        <li><strong>Site Suitability Modeling:</strong> Cemetery siting in Othaya using ArcGIS Pro (<a href="https://colab.research.google.com/drive/1cg1P0MBqiW6wqiviNMWNz9OpFUIsMSIn?usp=sharing" target="_blank">Colab</a>)</li>
                        <li><strong>Site Suitability Modeling:</strong> Health center siting in Othaya using ArcGIS Pro (<a href="https://colab.research.google.com/drive/1cg1P0MBqiW6wqiviNMWNz9OpFUIsMSIn?usp=sharing" target="_blank">Colab</a>)</li>
                        <li><strong>Spaceborne AI Rideshare Program:</strong> AI-powered crop health monitoring algorithm (80% complete)</li>
                    </ul>
                </div>
                
            </div>
        </div>

        <section id="contact" class="contact">
            <h2>Contact Kimathi</h2>
            <div class="contact-form">
                <form id="contact-form">
                    <label for="name">Name:</label>
                    <input type="text" name="user_name" id="name" required>

                    <label for="email">Email:</label>
                    <input type="email" name="user_email" id="email" required>

                    <label for="website-need">Need a Website?</label>
                    <select name="need" id="website-need">
                        <option>N/A</option>
                        <option>Yes</option>
                        <option>No</option>
                        <option>Maybe</option>
                        <option>Urgent</option>
                        <option>Later</option>
                        <option>Redesign</option>
                        <option>New GIS Site</option>
                        <option>E-commerce</option>
                        <option>Blog</option>
                        <option>Landing Page</option>
                    </select>

                    <label for="website-type">Type:</label>
                    <select name="type" id="website-type">
                        <option>N/A</option>
                        <option>Company</option>
                        <option>Portfolio</option>
                        <option>Dashboard</option>
                        <option>GIS</option>
                        <option>Mobile App</option>
                        <option>Web App</option>
                        <option>Real Estate</option>
                        <option>NGO</option>
                        <option>Startup</option>
                        <option>Other</option>
                    </select>

                    <label for="website-pricing">Pricing:</label>
                    <select name="pricing" id="website-pricing">
                        <option>N/A</option>
                        <option>Cheapest</option>
                        <option>Basic</option>
                        <option>Better</option>
                        <option>Best</option>
                        <option>One-time</option>
                        <option>Monthly</option>
                        <option>Yearly</option>
                        <option>Enterprise</option>
                        <option>Custom Plan</option>
                        <option>Not Sure</option>
                    </select>

                    <label for="message">Message:</label>
                    <textarea name="message" id="message" rows="3" placeholder="Tell us more..." required></textarea>

                    <button type="button" onclick="startVoiceInput()">🎙️ Speak Message</button>
                    <button type="submit">Send Message</button>
                    <button type="button" id="openWhatsappPopup" class="whatsapp-btn">Request via WhatsApp</button>
                    <div class="status" id="status"></div>
                </form>
            </div>
        </section>
    </div>

    <div class="profile-popup" id="profile-popup">
        <button class="close-btn" onclick="closePopup('profile-popup')">✕</button>
        <img src="kim.jpg" alt="Kimathi Joram (Celesta Kim)">
        <h3>Kimathi Joram (Celesta Kim)</h3>
        <p>Geospatial Engineer and Founder of GIS Conglomerate, passionate about sustainable development through GIS and Remote Sensing.</p>
    </div>

    <div class="starvision-popup" id="starvision-popup">
        <button class="close-btn" onclick="closePopup('starvision-popup')">✕</button>
        <h3>Starvision Involvement</h3>
        <p>Contributed to the creation of a satellite model for Starvision, developing AI-powered algorithms for crop health monitoring and geospatial analysis.</p>
    </div>

    <div class="whatsapp-popup" id="whatsapp-popup">
        <div class="whatsapp-header">
            <span>Chat with Kimathi</span>
            <button class="close-btn" onclick="closePopup('whatsapp-popup')">✕</button>
        </div>
        <div class="whatsapp-chat-body" id="whatsapp-chat-body">
            <div class="whatsapp-message other">
                Hello there! How can I assist you today regarding GIS or Remote Sensing projects?
            </div>
            <div class="whatsapp-message self" id="whatsapp-user-message" style="display: none;">
                </div>
        </div>
        <div class="whatsapp-input-area">
            <textarea id="whatsapp-message-input" placeholder="Type your message..." rows="1"></textarea>
            <button id="whatsapp-send-btn" class="whatsapp-send-btn">➤</button>
        </div>
    </div>

    <footer>
        <div class="basemap-lines"></div>
        <div class="footer-content">
            <h3>Explore Project Locations</h3>
            <div class="project-map-points">
                <div class="map-point" onclick="openProjectPopup('muranga-popup')">
                    <div class="map-point-icon">M</div>
                    <div class="map-point-label">Muranga Kiharu</div>
                </div>
                <div class="map-point" onclick="openProjectPopup('kericho-popup')">
                    <div class="map-point-icon">K</div>
                    <div class="map-point-label">Kericho Tea</div>
                </div>
            </div>
            <div class="social-links">
                <a href="https://github.com/CELESTAKIM/" target="_blank">GitHub</a> |
                <a href="https://linkedin.com/in/celesta-kim-21020232b" target="_blank">LinkedIn</a>
            </div>
        </div>
        <div class="project-popup" id="muranga-popup">
            <button class="close-btn" onclick="closePopup('muranga-popup')">✕</button>
            <img src="muranga-kiharu.jpg" alt="Muranga Kiharu Crop Mapping">
            <h3>Muranga Kiharu Crop Mapping</h3>
            <p>Involved in Phases 1 and 3 of the KSA Crop Type Mapping project, utilizing GIS and Remote Sensing for accurate land use analysis.</p>
        </div>
        <div class="project-popup" id="kericho-popup">
            <button class="close-btn" onclick="closePopup('kericho-popup')">✕</button>
            <img src="kericho-tea.jpg" alt="Kericho Tea Changes Tool">
            <h3>Kericho Tea Changes Tool</h3>
            <p>Developed a tool for monitoring tea land changes in Kericho during a GDEV DeKUT hackathon, leveraging NDVI analysis.</p>
        </div>
    </footer>

    <script>
        // Toggle theme
        document.getElementById('toggle-theme').onclick = () => {
            document.body.dataset.theme = document.body.dataset.theme === 'dark' ? '' : 'dark';
        };

        // Navigation active state and section framing
        const navLinks = document.querySelectorAll('nav a');
        const sections = document.querySelectorAll('#home, #skills, #projects, #contact');
        const headerOffset = 70; // Height of your fixed header

        function setActiveLinkAndFrame() {
            let currentActiveIndex = 0;
            const scrollPosition = window.scrollY + headerOffset + 10; // Add small buffer

            sections.forEach((section, i) => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    currentActiveIndex = i;
                }
                // Remove frame from all sections first
                section.classList.remove('scrolled-in');
            });

            // Add frame to the currently active section
            sections[currentActiveIndex].classList.add('scrolled-in');

            // Set active navigation link
            navLinks.forEach(link => link.classList.remove('active'));
            if (currentActiveIndex < navLinks.length) {
                navLinks[currentActiveIndex].classList.add('active');
            }
        }

        window.addEventListener('scroll', setActiveLinkAndFrame);
        document.addEventListener('DOMContentLoaded', setActiveLinkAndFrame); // Set active link and frame on load

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    window.scrollTo({
                        top: targetSection.offsetTop - headerOffset,
                        behavior: 'smooth'
                    });
                }
                document.querySelector('nav').classList.remove('active');
            });
        });

        // Menu toggle for small screens
        document.querySelector('.menu-icon').addEventListener('click', () => {
            document.querySelector('nav').classList.toggle('active');
        });

        // Profile popup
        document.getElementById('profile-img').addEventListener('click', () => {
            document.getElementById('profile-popup').style.display = 'block';
        });

        // Project and Starvision popups
        function openProjectPopup(id) {
            document.getElementById(id).style.display = 'block';
        }

        function closePopup(id) {
            document.getElementById(id).style.display = 'none';
        }

        // Starvision popup trigger
        document.addEventListener('DOMContentLoaded', () => {
            const starvisionTrigger = document.createElement('button');
            starvisionTrigger.textContent = 'View Starvision Contribution';
            starvisionTrigger.style.cssText = `
                margin: 10px auto;
                display: block;
                padding: 10px;
                background: linear-gradient(145deg, var(--gradient-start-light), var(--gradient-end-light));
                color: #fff;
                border: none;
                border-radius: 10px;
                cursor: pointer;
                box-shadow: 0 2px 5px var(--shadow-light);
                transition: background 0.3s ease, transform 0.2s ease;
            `;
            starvisionTrigger.onmouseover = () => starvisionTrigger.style.background = 'var(--button-hover-light)';
            starvisionTrigger.onmouseout = () => starvisionTrigger.style.background = 'linear-gradient(145deg, var(--gradient-start-light), var(--gradient-end-light))';
            starvisionTrigger.onmousedown = () => starvisionTrigger.style.transform = 'translateY(1px)';
            starvisionTrigger.onmouseup = () => starvisionTrigger.style.transform = 'translateY(-2px)';

            document.querySelector('.projects').appendChild(starvisionTrigger);
            starvisionTrigger.addEventListener('click', () => {
                document.getElementById('starvision-popup').style.display = 'block';
            });
        });

        // Countdown for GIS Conglomerate (Updated to current date calculation)
        function updateCountdown() {
            const startDate = new Date('2025-06-27T00:00:00+03:00'); // Assuming EAT (GMT+3)
            const now = new Date();
            const timeDiff = now.getTime() - startDate.getTime();
            const daysOld = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            document.getElementById('countdown').textContent = `${daysOld} days old`;
        }
        updateCountdown();
        setInterval(updateCountdown, 1000 * 60 * 60); // Update every hour

        // EmailJS setup
        emailjs.init("piIAOD9_TJP1-S498");
        document.getElementById("contact-form").addEventListener("submit", function(event) {
            event.preventDefault();
            const form = this;
            const status = document.getElementById("status");
            status.innerHTML = "⏳ Sending...";

            emailjs.sendForm("service_2p9fq39", "template_kv4rjih", form)
                .then(() => {
                    const fd = new FormData(form);
                    emailjs.send("service_2p9fq39", "template_8rl13lh", {
                        user_email: fd.get("user_email"),
                        user_name: fd.get("user_name")
                    });
                    status.innerHTML = "✅ Message sent and auto-reply delivered!";
                    form.reset();
                    document.getElementById("website-type").disabled = true;
                    document.getElementById("website-pricing").disabled = true;
                    document.getElementById("website-type").value = "N/A";
                    document.getElementById("website-pricing").value = "N/A";
                }, (error) => {
                    console.error(error);
                    status.innerHTML = "❌ Failed to send.";
                });
        });

        // Voice input
        function startVoiceInput() {
            const msgField = document.querySelector("textarea[name='message']");
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
            recognition.start();
            recognition.onresult = (event) => {
                msgField.value = event.results[0][0].transcript;
            };
            recognition.onerror = (event) => {
                console.error("Speech recognition error:", event.error);
                alert("Speech recognition failed. Please ensure your microphone is working and permission is granted.");
            };
        }

        // Handle "Need a Website?" selection
        document.getElementById("website-need").addEventListener("change", function() {
            const typeSelect = document.getElementById("website-type");
            const pricingSelect = document.getElementById("website-pricing");
            if (this.value === "N/A") {
                typeSelect.disabled = true;
                typeSelect.value = "N/A";
                pricingSelect.disabled = true;
                pricingSelect.value = "N/A";
            } else {
                typeSelect.disabled = false;
                typeSelect.value = "Company";
                pricingSelect.disabled = false;
                pricingSelect.value = "Cheapest";
            }
        });

        // Initialize form state
        document.addEventListener("DOMContentLoaded", function() {
            const websiteNeed = document.getElementById("website-need");
            const typeSelect = document.getElementById("website-type");
            const pricingSelect = document.getElementById("website-pricing");
            if (websiteNeed.value === "N/A") {
                typeSelect.disabled = true;
                pricingSelect.disabled = true;
            }
        });

        // WhatsApp Popup Logic
        document.getElementById('openWhatsappPopup').addEventListener('click', () => {
            document.getElementById('whatsapp-popup').style.display = 'block';
            document.getElementById('whatsapp-message-input').focus();
        });

        document.getElementById('whatsapp-send-btn').addEventListener('click', () => {
            const inputField = document.getElementById('whatsapp-message-input');
            const userMessageDiv = document.getElementById('whatsapp-user-message');
            const message = inputField.value.trim();
            const phoneNumber = '254101370035'; // Your WhatsApp number

            if (message) {
                userMessageDiv.textContent = message;
                userMessageDiv.style.display = 'block'; // Show the user's message
                inputField.value = ''; // Clear input

                // Open WhatsApp Web/App
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                window.open(whatsappUrl, '_blank');

                // Optionally, add a "sent" message from Kimathi
                setTimeout(() => {
                    const chatBody = document.getElementById('whatsapp-chat-body');
                    const confirmationMessage = document.createElement('div');
                    confirmationMessage.classList.add('whatsapp-message', 'other');
                    confirmationMessage.textContent = "Great! I've received your message on WhatsApp. Let's continue our chat there.";
                    chatBody.appendChild(confirmationMessage);
                    chatBody.scrollTop = chatBody.scrollHeight; // Scroll to bottom
                }, 1000);

            } else {
                alert("Please type a message to send.");
            }
        });

        // Auto-resize textarea for WhatsApp input
        document.getElementById('whatsapp-message-input').addEventListener('input', function () {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
    </script>
</body>
</html>
